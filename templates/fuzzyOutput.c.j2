#include <string.h>
#include "memFunc.h"
#include "fuzzyOutput.h"

/*! INIT OF A FUZZY OUTPUT
 *		output		fo			Fuzzy output to init
 *		input		name		Label of the Fuzzy output
 *		input		MFs			Array of membership functions
 *		input 		nMF			Number of membership functions to be included
 *
 *		return					Flag: -1 if error, 0 otherwise
 */
int createOutput(fuzzyOutput * fo, char* name, memFunction * MFs, int nMF) {
	if (fo == NULL) {
		return -1;
	}
	strcpy(fo->name, name);

	fo->nMF = nMF;
	if (nMF > MAX_N_MF_OUTPUT) {
		return -1;
	}

	if (MFs == NULL) {
		return -1;
	}
	memcpy(fo->mf, MFs, nMF*sizeof(memFunction));

	return 0;
}

// /*! DEALLOCATION OF A FUZZY OUTPUT
//  *		input		fuzzy_input		Pointer to a Member Function
//  */
// void killOutput(fuzzyOutput * fuzzy_output) {
// 	if (fuzzy_output == NULL) {
// 		return;
// 	}
// 	free(fuzzy_output->name);
// 	free(fuzzy_output->mf);
// }
//
// /*! ADD A FUZZY SET TO A FUZZY OUTPUT
//  *		input		fuzzy_output	Pointer to a Fuzzy Output struct
//  *		input		memb_funct		Pointer to a Fuzzy Set struct
//  */
// void addFuzzySetOutput(fuzzyOutput * fuzzy_output , memFunction * memb_funct){
// 	fuzzy_output -> mf[fuzzy_output -> nMF] = *memb_funct;
// 	fuzzy_output -> nMF++;
// }

/*! FIND MF GIVEN NAME
 *		input		fuzzy_output	Pointer to the Fuzzy Output struct
 *		input		name			Name of the MF
 *
 *		return						Index of the MF or -1 if not found
 */
int getOutputMFFromName(fuzzyOutput * fuzzy_output, char * name) {
	int i;
	for (i = 0; i < fuzzy_output->nMF; i++) {
		if ( strcmp(name, fuzzy_output->mf[i].name) == 0 ) {
			return i;
		}
	}
	return -1;
}
